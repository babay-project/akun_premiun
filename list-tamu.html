<!doctype html>
<html lang="id" data-dc class="light">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Kirim Undangan - Tania & Bayu</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
/* =========================================
   THEME SETUP
   ========================================= */
:root{
  /* Dark */
  --dc-bg:#313338; --dc-bg-soft:#2b2d31; --dc-surface:#1e1f22;
  --dc-text:#f2f3f5; --dc-muted:#b5bac1; --dc-stroke:#3f4247;
  --dc-primary:#5865f2; --dc-primary-hover:#4752c4;
  /* Light */
  --dcL-bg:#f2f3f5; --dcL-bg-soft:#ffffff; --dcL-surface:#ffffff;
  --dcL-text:#060607; --dcL-muted:#6b7280; --dcL-stroke:#e5e7eb;
  --dcL-primary:#5865f2; --dcL-primary-hover:#4752c4;
}

/* ===== Base ===== */
*{box-sizing:border-box}
html[data-dc] body{
  margin:0; background:var(--dcL-bg); color:var(--dcL-text);
  font-family:Poppins,system-ui,sans-serif; -webkit-font-smoothing:antialiased;
}
.wrap{max-width:800px;margin:0 auto;padding:20px 14px 84px}

/* ===== Header ===== */
.header{display:flex;flex-direction:column;gap:8px;margin:30px 0 24px;text-align:center}
.header h1{margin:0;font:800 24px/1.2 Poppins;letter-spacing:-0.5px}
.header p{margin:0;color:var(--dcL-muted);font-weight:500;font-size:14px}
.badge-slug{
  display:inline-block; background:#eef2ff; color:#4450db; 
  padding:4px 12px; border-radius:50px; font-weight:700; font-size:12px; margin-top:8px;
}

/* ===== Card ===== */
.card{
  background:var(--dcL-bg-soft); border:1px solid var(--dcL-stroke);
  border-radius:16px; padding:20px; box-shadow:0 12px 28px rgba(0,0,0,.04)
}
.section-title{margin:0 0 12px;font:800 16px/1.2 Poppins; display:flex; align-items:center; gap:8px}

/* ===== Form Elements ===== */
textarea{
  width:100%; min-height:140px; padding:14px; border:1px solid var(--dcL-stroke);
  border-radius:12px; background:var(--dcL-surface); color:var(--dcL-text);
  font:400 14px/1.5 Poppins; outline:0; resize:vertical;
  transition:border-color .15s,box-shadow .15s;
}
textarea:focus{border-color:var(--dcL-primary);box-shadow:0 0 0 3px rgba(88,101,242,.15)}
.hint{color:var(--dcL-muted);font-size:12.5px;margin:6px 0 0}

/* ===== Buttons ===== */
.actions{display:flex;gap:10px;margin-top:12px}
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:8px;cursor:pointer;
  border-radius:10px; border:1px solid transparent; padding:10px 16px;
  font:700 13.5px/1 Poppins; text-decoration:none; transition:all .15s ease;
  flex:1;
}
.btn:active{transform:translateY(1px)}
.btn svg{width:18px;height:18px}

/* Button Colors */
.btn-primary{background:var(--dcL-primary);color:#fff;box-shadow:0 4px 12px rgba(88,101,242,.2)}
.btn-primary:hover{background:var(--dcL-primary-hover)}
.btn-danger{background:#fff;color:#ef4444;border-color:#fee2e2}
.btn-danger:hover{background:#fef2f2;border-color:#fecaca}
.btn-whatsapp{background:#25d366;color:#fff}
.btn-whatsapp:hover{background:#1ebe5d}

/* ===== List Items ===== */
.list{margin-top:24px;display:grid;gap:16px}
.item{
  border:1px solid var(--dcL-stroke); border-radius:14px; 
  overflow:hidden; background:var(--dcL-surface);
}
.item-head{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 16px; background:#f9fafb; border-bottom:1px solid var(--dcL-stroke);
}
.item-name{font:700 15px Poppins;color:var(--dcL-text)}
.item-body{padding:16px}
.control-row{display:flex; align-items:center; gap:10px; margin-bottom:12px}
.control-row label{font-size:12px; font-weight:600; color:var(--dcL-muted); white-space:nowrap}
select.version-select{
  width:100%; padding:8px 12px; border-radius:8px; 
  border:1px solid var(--dcL-stroke); background:var(--dcL-bg);
  font-family:Poppins; font-size:13px; color:var(--dcL-text);
}
.msg-preview{
  width:100%; min-height:100px; font-size:13px; padding:10px; 
  margin-bottom:10px; background:var(--dcL-bg); border-radius:8px;
  border:1px solid var(--dcL-stroke); color:var(--dcL-muted);
}

/* ===== Toast/Modal ===== */
.modal{
  position:fixed;inset:0;display:none;place-items:center;z-index:99;
  background:rgba(0,0,0,.4);backdrop-filter:blur(2px);
}
.modal.show{display:grid;animation:fade .2s}
.modal-card{
  background:#fff;padding:20px;border-radius:16px;width:min(400px,90vw);
  text-align:center;box-shadow:0 20px 40px rgba(0,0,0,.2);
}
@keyframes fade{from{opacity:0}to{opacity:1}}

/* ===== Dark Mode Overrides ===== */
html[data-dc]:not(.light) body{background:var(--dc-bg);color:var(--dc-text)}
html[data-dc]:not(.light) .card{background:var(--dc-bg-soft);border-color:var(--dc-stroke)}
html[data-dc]:not(.light) .item{background:var(--dc-bg-soft);border-color:var(--dc-stroke)}
html[data-dc]:not(.light) .item-head{background:#232428;border-bottom-color:var(--dc-stroke)}
html[data-dc]:not(.light) .item-name{color:var(--dc-text)}
html[data-dc]:not(.light) textarea, html[data-dc]:not(.light) select, html[data-dc]:not(.light) .msg-preview{
  background:var(--dc-surface); color:var(--dc-text); border-color:var(--dc-stroke);
}
html[data-dc]:not(.light) .header p, html[data-dc]:not(.light) .hint{color:var(--dc-muted)}
html[data-dc]:not(.light) .badge-slug{background:#3b3f86;color:#cfd3ff}

/* Theme Switcher */
.theme-switch{position:fixed;bottom:20px;right:20px;z-index:80}
.btn-theme{background:var(--dcL-surface);border:1px solid var(--dcL-stroke);border-radius:50px;width:40px;height:40px;font-size:18px;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,.1)}
</style>
</head>
<body>

<main class="wrap">
  <header class="header">
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEhhJrYv5OzuQ6bPTyBcgu_1MpmoPAgyLf__EGK5YGZQmQnOSVFxaY0xrWCdfmKX2bzsnyqNmKQF7Js0BJhf92K8wtYcB_voF6zJi25jlXGIkh81KylJV7K9N4S5a9ySywGhOqOtAtGI0yUw5wxztMUUswTrj9_vy0HI66n5H6KieOItjPXMIPFbJOrtmPnY" 
         alt="Logo" style="width:80px;border-radius:16px;margin:0 auto 12px;box-shadow:0 4px 12px rgba(0,0,0,.1)">
    <h1>Undangan Pernikahan</h1>
    <div><span class="badge-slug">Slug: tania-bayu</span></div>
    <p>Masukkan daftar nama tamu, lalu kirim undangan via WhatsApp.</p>
  </header>

  <section class="card">
    <div class="section-title">üìù Tambah Tamu (Banyak Sekaligus)</div>
    <textarea id="namaTamu" placeholder="Contoh:
Budi dan Istri
Keluarga Besar Pak RT
Teman-teman Alumni SMA"></textarea>
    <p class="hint">Tulis satu nama per baris. Tekan enter untuk baris baru.</p>
    
    <div class="actions">
      <button id="addBtn" class="btn btn-primary">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
        Proses Daftar Nama
      </button>
      <button id="clearBtn" class="btn btn-danger" style="flex:0">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
      </button>
    </div>
  </section>

  <div id="list" class="list"></div>
</main>

<div id="modal" class="modal">
  <div class="modal-card">
    <h3 id="modalTitle" style="margin:0 0 8px;font-family:Poppins">Info</h3>
    <p id="modalDesc" style="margin:0 0 16px;color:#666;font-size:14px">Pesan</p>
    <button onclick="document.getElementById('modal').classList.remove('show')" class="btn btn-primary" style="width:100%">OK</button>
  </div>
</div>

<div class="theme-switch">
  <button id="themeToggle" class="btn-theme">üåô</button>
</div>

<script>
(function(){
  const $ = (s)=>document.querySelector(s);
  
  // --- CONFIGURASI KHUSUS ---
  const FIXED_SLUG = "tania-bayu";
  const BASE_URL = "https://undangannya.web.id/";
  
  // --- TEMPLATES PESAN ---
  const TEMPLATES = [
    {
      key: 'tania',
      label: 'Versi Tania (The Wedding Of Tania & Bayu)',
      build: (to) => {
        const link = `${BASE_URL}${FIXED_SLUG}/?to=${encodeURIComponent(to).replace(/%20/g,'+')}`;
        return `Assalamu'alaikum Wr. Wb
*${to}*

Bismillahirrohmanirrohim.
The Wedding Of Tania & Bayu

Tanpa mengurangi rasa hormat, perkenankan kami mengundang Bapak/Ibu/Saudara/i sekalian, untuk menghadiri acara pernikahan kami,

Berikut link website Undangan Online-nya, untuk informasi lebih lengkap dari acara kami :

${link}

Ungkapan syukur & terima kasih yang tulus dari kami apabila Bapak/Ibu dan teman teman berkenan hadir dalam acara pernikahan kami dan memberikan doa restu üòá

Alhamdulillahi Jaza Kumullahu Khoiro,
Wassalamu‚Äôalaikum Warohamtullahi Wabarokatuh.

Hormat kami yg berbahagia,
Tania & Bayu`;
      }
    },
    {
      key: 'bayu',
      label: 'Versi Bayu (The Wedding Of Bayu & Tania)',
      build: (to) => {
        const link = `${BASE_URL}${FIXED_SLUG}/?to=${encodeURIComponent(to).replace(/%20/g,'+')}`;
        return `Assalamu'alaikum Wr. Wb
*${to}*

Bismillahirrohmanirrohim.
The Wedding Of Bayu & Tania

Tanpa mengurangi rasa hormat, perkenankan kami mengundang Bapak/Ibu/Saudara/i sekalian, untuk menghadiri acara pernikahan kami,

Berikut link website Undangan Online-nya, untuk informasi lebih lengkap dari acara kami :

${link}

Ungkapan syukur & terima kasih yang tulus dari kami apabila Bapak/Ibu dan teman teman berkenan hadir dalam acara pernikahan kami dan memberikan doa restu üòá

Alhamdulillahi Jaza Kumullahu Khoiro,
Wassalamu‚Äôalaikum Warohamtullahi Wabarokatuh.

Hormat kami yg berbahagia,
Bayu & Tania`;
      }
    }
  ];

  // --- STATE ---
  let items = [];

  // --- DOM ELEMENTS ---
  const listEl = $('#list');
  const inputEl = $('#namaTamu');
  const modal = $('#modal');

  // --- FUNCTIONS ---
  const showModal = (title, desc) => {
    $('#modalTitle').textContent = title;
    $('#modalDesc').textContent = desc;
    modal.classList.add('show');
  };

  const copyText = async (text) => {
    try { await navigator.clipboard.writeText(text); return true; } 
    catch { return false; }
  };

  const render = () => {
    listEl.innerHTML = '';
    if(items.length === 0){
      listEl.innerHTML = '<div style="text-align:center;color:var(--dcL-muted);font-size:14px;padding:20px;">Belum ada daftar tamu.</div>';
      return;
    }

    items.forEach((item, idx) => {
      // Container
      const el = document.createElement('div'); el.className = 'item';
      
      // Header Item
      const head = document.createElement('div'); head.className = 'item-head';
      head.innerHTML = `<span class="item-name">${item.name}</span>`;
      
      const delBtn = document.createElement('button');
      delBtn.className = 'btn btn-danger';
      delBtn.style.padding = '6px 12px'; delBtn.style.fontSize = '12px';
      delBtn.innerHTML = 'Hapus';
      delBtn.onclick = () => { items.splice(idx,1); render(); };
      head.appendChild(delBtn);

      // Body Item
      const body = document.createElement('div'); body.className = 'item-body';

      // Control (Pilih Versi)
      const ctrl = document.createElement('div'); ctrl.className = 'control-row';
      const sel = document.createElement('select'); sel.className = 'version-select';
      sel.innerHTML = TEMPLATES.map(t => `<option value="${t.key}">${t.label}</option>`).join('');
      sel.value = item.version;
      
      ctrl.appendChild(document.createTextNode('Versi: '));
      ctrl.appendChild(sel);

      // Textarea Preview
      const area = document.createElement('textarea');
      area.className = 'msg-preview';
      
      const updateMsg = () => {
        item.version = sel.value;
        const tmpl = TEMPLATES.find(t => t.key === item.version);
        area.value = tmpl.build(item.name);
      };
      
      sel.addEventListener('change', updateMsg);
      updateMsg(); // init

      // Action Buttons
      const actions = document.createElement('div'); actions.className = 'actions';
      
      const copyBtn = document.createElement('button'); copyBtn.className = 'btn btn-primary';
      copyBtn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Copy';
      copyBtn.onclick = async () => {
        const ok = await copyText(area.value);
        showModal(ok ? 'Disalin' : 'Gagal', ok ? 'Pesan berhasil disalin.' : 'Izin clipboard ditolak.');
      };

      const waBtn = document.createElement('button'); waBtn.className = 'btn btn-whatsapp';
      waBtn.innerHTML = '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413Z"/></svg> Kirim WA';
      waBtn.onclick = () => window.open(`https://wa.me/?text=${encodeURIComponent(area.value)}`, '_blank');

      actions.append(copyBtn, waBtn);
      body.append(ctrl, area, actions);
      el.append(head, body);
      listEl.appendChild(el);
    });
  };

  // --- LISTENERS ---
  $('#addBtn').addEventListener('click', () => {
    const lines = inputEl.value.split('\n').map(s=>s.trim()).filter(Boolean);
    if(!lines.length) return showModal('Ups','Masukkan nama tamu terlebih dahulu.');
    
    let addedCount = 0;
    lines.forEach(name => {
      // Cek duplikat sederhana
      if(!items.find(i => i.name.toLowerCase() === name.toLowerCase())){
        items.push({ name: name, version: 'tania' }); // Default Tania
        addedCount++;
      }
    });
    
    inputEl.value = '';
    render();
    showModal(addedCount>0?'Sukses':'Info', addedCount>0?`${addedCount} nama ditambahkan.`:'Semua nama sudah ada di daftar.');
  });

  $('#clearBtn').addEventListener('click', () => {
    if(items.length && confirm('Hapus semua daftar?')){
      items = []; render();
    }
  });

  // Dark Mode
  const root = document.documentElement;
  const tBtn = $('#themeToggle');
  const applyTheme = (dark) => {
    root.classList.toggle('light', !dark);
    tBtn.innerHTML = dark ? 'üåû' : 'üåô';
  };
  tBtn.onclick = () => applyTheme(root.classList.contains('light'));
  
  // Init
  render();

})();
</script>
</body>
</html>
